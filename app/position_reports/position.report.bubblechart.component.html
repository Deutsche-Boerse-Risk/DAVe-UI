<md-card *ngIf="chartData?.rows.length">
    <md-select placeholder="Member"
               [(ngModel)]="sourceData.memberSelection"
               (ngModelChange)="memberSelectionChanged()">
        <md-option *ngFor="let option of sourceData?.selection.getOptions(); trackBy:trackByKey"
                   [value]="option">{{option.member}}
        </md-option>
    </md-select>
    <md-select placeholder="Account"
               [(ngModel)]="sourceData.accountSelection"
               (ngModelChange)="accountSelectionChanged()">
        <md-option
                *ngFor="let option of sourceData?.selection.get(sourceData?.memberSelection?.memberKey)?.subRecords.getOptions(); trackBy:trackByKey"
                [value]="option">{{option.account}}
        </md-option>
    </md-select>
    <md-select placeholder="Number of bubbles"
               [(ngModel)]="topRecordsCount"
               (ngModelChange)="accountSelectionChanged()">
        <md-option *ngFor="let bubblesCount of topRecords; trackBy:trackByIndex"
                   [value]="bubblesCount">{{bubblesCount}}
        </md-option>
    </md-select>
</md-card>

<initial-load *ngIf="initialLoad && !errorMessage"></initial-load>

<no-data *ngIf="!initialLoad && !errorMessage && chartData?.rows.length <= 1"></no-data>

<update-failed *ngIf="errorMessage" [message]="errorMessage"></update-failed>

<md-card *ngIf="chartData?.rows.length && title" class="info">
    <div [innerHTML]="title"></div>
</md-card>

<md-card style="height: 345px" *ngIf="chartData?.rows.length">
    <google-chart *ngIf="chartShown && chartData?.rows.length"
                  [chartData]="chartData"
                  [chartOptions]="options"
                  chartType="BubbleChart"
                  height="345px">
    </google-chart>
</md-card>

<a *ngIf="chartData?.rows.length"
   md-raised-button
   color="accent"
   style="width: 100%"
   [routerLink]="routerRoots.POSITION_REPORTS_LATEST">
    View Details
</a>